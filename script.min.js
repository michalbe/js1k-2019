var h = 2 * Math.PI, k = [0, 255, 0], l = -1, m = "e13wtdmn7n079tsf7qy20naz7gcepyazc0z1tcvvautqjrrrax1ppc9rbcytdccxd33098ltc02ythhxcevfb01r".split("").reduce(function (a, b, d) { a[l]; 0 === d % 8 && (l++ , a[l] = ""); a[l] += b; return a }, []).map(function (a) { return parseInt(a, 36).toString(2) }).join("").split(""); function n(a, b) { a |= 0; b |= 0; return 0 > a || 20 <= a || 0 > b || 22 <= b ? -1 : m[20 * b + a] } function p(a, b, d, e, c) { if (0 === b) return { c: Infinity }; var f = 0 < b ? ~~(d + 1) - d : Math.ceil(d - 1) - d; a = f * a / b; return { x: c ? e + a : d + f, y: c ? d + f : e + a, c: f * f + a * a } }
function q(a, b, d, e, c, f, g) { b = 20 * (a.y - (0 > g ? d : 0) | 0) + (a.x - (0 > f ? b : 0) | 0); a.g = 0 > b || b >= m.length ? -1 : m[b]; a.a = e + Math.sqrt(a.c); a.h = 0; a.offset = c - (c | 0); return a } var r = .4 * Math.PI, t = { x: 0, y: 0 }, u = .5 * Math.PI, v = document.getElementById("canvas"), w = v.getContext("2d"), z = 640 / 28; v.width = 640; v.height = 360; var A = { 37: "l", 39: "r", 38: "f", 40: "b" }, B = { l: !1, r: !1, f: !1, b: !1 }; document.addEventListener("keydown", C.bind(this, !0), !1); document.addEventListener("keyup", C.bind(this, !1), !1); function C(a, b) { var d = A[b.keyCode]; d && (B[d] = a) }
var D = 2.8, E = 3.7, F = .3 * Math.PI; function G(a) { var b = Math.cos(F) * a; a *= Math.sin(F); 0 >= n(D + b, E) && (D += b); 0 >= n(D, E + a) && (E += a); t.x = D; t.y = E } u = F; t.x = D; t.y = E; var H = 0;
function I(a) {
    var b = (a - H) / 1E3; H = a; if (.2 > b) {
    B.l && (u = F = (F + -Math.PI * b + h) % h); B.r && (u = F = (F + Math.PI * b + h) % h); B.f && G(3 * b); B.b && G(-3 * b); canvas.width = canvas.width; w.save(); for (a = 0; 28 > a; a++) {
        b = r * (a / 28 - .5); var d = void 0; var e = u + b; var c = t; d = void 0 === d ? !1 : d; var f = [], g = Math.sin(e); e = Math.cos(e); c = { x: c.x, y: c.y, g: 0, a: 0 }; do { f.push(c); if (!d && 0 < c.g) break; var x = p(g, e, c.x, c.y); var y = p(e, g, c.y, c.x, !0); c = x.c < y.c ? q(x, 1, 0, c.a, x.y, e, g) : q(y, 0, 1, c.a, y.x, e, g) } while (14 >= c.a); g = a; d = f; e = b; b = ~~(g * z); f = Math.ceil(z); for (c = -1; ++c < d.length &&
            0 >= d[c].g;); c < d.length && (w.save(), d = d[c], g = "JS1K"[g % 4], e = d.a * Math.cos(e), c = 360 / e, e = 180 * (1 + 1 / e) - c, w.globalAlpha = 1, w.fillStyle = "rgba(" + k[0] + ", " + k[1] + ", " + k[2] + ", " + (1 - Math.max((d.a + d.h) / 5, 0)) + ")", w.font = c + "px Arial", f /= w.measureText(g).width, w.scale(f, 1), w.fillText(g, b / f, e + c), w.restore())
    } w.restore()
    } requestAnimationFrame(I)
} I();
